{% extends 'bases/stock-base.html'%}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}
Dashboard
{% endblock %}
{% block style %}
   
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">


<!--FontAwesome CDN ...necessary for the icons-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">

<script src="{% static 'js/chart.min.js' %}">/*Remember that this is a dist file.... source is: 
https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js*/

</script>

<!-- start of import libraries for the modal -->
<!--
<script type="text/javascript" src="{% static 'js/jquery-3.6.0.slim.min.js1' %}">
  /*NB. Note that if this library comes after the bootstrap.bundle.js, then the modal will not open*/
</script>
-->
<script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.bundle.js' %}">/*This is important for the modal*/

</script>

<!--end of importtant libraries for the modal  -->

<style>
    /* Extra small devices (phones, 600px and down) */
@media only screen and (max-width: 600px) {}

/* Small devices (portrait tablets and large phones, 600px and up) */
@media only screen and (min-width: 600px) {}

/* Medium devices (landscape tablets, 768px and up) */
@media only screen and (min-width: 768px) {}

/* Large devices (laptops/desktops, 992px and up) */
@media only screen and (min-width: 992px) {}

/* Extra large devices (large laptops and desktops, 1200px and up) */
@media only screen and (min-width: 1200px) {}

/* .............. note that 1cm = 37.8px.....................*/

  
    body {
        /*background-color: #F6F7F8;*/
        font-size: 2rem;
        opacity: 1;
        position:sticky;
        overflow: auto;
        text-align: left;
        max-width: 100%; 
        background-color: #F6F7F8;
        margin: auto;
        padding: auto;
        

    }
   
    .container{
      background-color: #F6F7F8;
      }
    .container tr:hover {
      background-color: #FFF;
      color: black;
    }
    table{
      background-color: #F6F7F8;
    }
.mybuttonlinks{
    margin-top: 7px; margin-left: 7px;
    margin-bottom: 5px;
 
}
#allif-section-headers{
    background-color: #e9eaec;
    color: black;
    font-size: 16px;
    text-align: center;
}
#allif-link-buttons{
    background-color: #F6F7F8;
    color: black;
}
#allif-link-buttons:hover {
    background-color: #714b67;
    color: white;
}


                      
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:200px) and (max-width:800px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container {
            
            margin-top: 110px;
            /*display: inline-block;
            overflow: auto;*/
            font-size: 0.95rem;
           
            
            color:black;
            overflow: auto;
            overflow-x: scroll;
            overflow-y: scroll;
            height: 480px;
          
        }
        .mycomments{
          display: none;
        }
       
      }
/*********************************************************** end of styling for extra small mobiles*/

  
 
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:800px) and (max-width:1000px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container{
            
            /*display: inline-block;
            overflow: auto;*/
            font-size: 0.95rem;
           
            margin-top: 8px;
            margin-left: auto;
            padding-left: 90px;
            
        }
        
      }
/*********************************************************** end of styling for extra small mobiles*/

 
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:1000px) and (max-width:2000px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container {
            
            margin-top: 10px;
            display: block;
           
            font-size: 0.95rem;
            
            margin-left:auto ;
            
            margin-right: auto;
            margin: auto;
            padding-left: 90px;
            
        }
        
      }
/*********************************************************** end of styling for extra small mobiles*/

/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:2000px)  {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
       .container {
            
            margin-top: 10px;
            display: block;
            overflow: auto;
            font-size: 1.00rem;
            
            margin-left: 120px;
            overflow-x: hidden;
            margin-right: 20px;
           
        }
      }
/*********************************************************** end of styling for extra small mobiles*/
 
    </style>
   {%endblock%}
   
   {% block body %}
 
<div class="container"><!--start of main container of the page--...#17a2b8;  -->

    <!--start of first row-->
    <div class="row mt-12" >
        
        <div class="col-md-4">
            <div class="card">
                <div id="allif-section-headers" class="card-header ">
                   Quick Links
                </div>
                <div >

                <a  href="{% url 'stockmanagementapp:upload_stock' %}">
                    <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks " >
                        Upload Excel</button></a>
                    <a  href="{% url 'stockmanagementapp:export-simple-data' %}">
                    <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks" >
                    Export</button></a>
                    <a  href="{% url 'stockmanagementapp:stores' %}">
                    <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks" >
                    Stores</button></a>

                    <a  href="{% url 'stockmanagementapp:transfer-orders' %}">
                      <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks" >
                      TRF Orders</button></a>

                      <a  href="{% url 'stockmanagementapp:purchase-orders' %}">
                        <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks" >
                        LPOs</button></a>

                        <a  href="{% url 'stockmanagementapp:issued-stock-history' %}">
                          <button id="allif-link-buttons" type="button" class="btn btn-success mybuttonlinks" >
                          Stock History</button></a>


                    </div>

            </div>
        </div>
        

        <div class="col-md-8">
            <div class="card">
                <div id="allif-section-headers" class="card-header">
                    
                Inventory
                </div>
                <div class="col-md-12">
            <!--start of the table-->
                
                <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Description</th>
                    <th scope="col">Inventory</th>
                    <th scope="col">UC</th>
                    <th scope="col">UP</th>
                    
                    
                    <th scope="col">Details</th>
                    <th scope="col">Action</th>
                    <th scope="col">
                        <!-- Trigger the modal with a button -->
                      <a href="#myModal" data-toggle="modal" data-target="#myModal">Add 
                      </a>

                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      
                    <tbody>
                      {% for product in physical_products %}
                      <tr>
                        
                        <td>{{product.description}}</td>
                        <td>
                        
                        {% if product.quantity <= product.reorderLevel %}
              
                    <div style="background-color: orange"> <a href="{% url 'stockmanagementapp:receive-or-issue-stock' product.id %}">
                     {{product.quantity}}</a></div>
                   
                    {% else %}
                    <a href="{% url 'stockmanagementapp:receive-or-issue-stock' product.id %}"> {{product.quantity}}</a>
                    
                        {% endif %}
                      </td>  
                      <td>${{product.unitcost|floatformat:2}}</td>

                      <td>${{product.unitPrice|floatformat:2}}</td> 
                      
                      <td><a href="{% url 'stockmanagementapp:item-details' product.id %} ">Details</a></td>
                    
                    <td> <a href="{% url 'stockmanagementapp:update-stock-item' product.id %} ">
                    <img src="{% static 'images/edit.png'%}" width="20"></a>

                    <td> <a href="{% url 'stockmanagementapp:delete-stock-item' product.id %} " data-toggle="tooltip" title="Delete this record">
                      <img src="{% static 'images/delete.png'%}" width="20"></a></td>
                    </td>
                           
                  </tr>
                    {% endfor %}
                      </tbody>
                    </table>
                        <!--start of the pagination section-->
              
              <!--the line below shows the pagination on the page-->
             <!--{{physical_products}} -->
              
              <!--
              Has Previous {{physical_products.has_previous}}
              <br>
              Has Next {{physical_products.has_next }}
              <br>
              Current Page {{physical_products.number }}
              <br>
              Number of pages {{physical_products.paginator.num_pages }}
              -->
              <!--the styling of the pagination using Bootstrap...code below is from Bootstrap-->
              <div style="margin-left: 450px;">
                <nav aria-label="Page navigation example">
                  <ul class="pagination">
                {% if physical_products.has_previous %}
                <li class="page-item " > <a class="page-link" href="?page=1">&laquo First </a></li><!-- &laquo; are for the arrows-->
                <li class="page-item"> <a class="page-link" href="?page={{physical_products.previous_page_number }}">Previous </a></li>
  
                {% endif %}
                
                <li class="page-item disabled">
                    <a href="#" class="page-link" > Page {{physical_products.number}} of {{physical_products.paginator.num_pages}}
                </a>
              </li>
            
            <!--
            {% for pages in page_num %}-->
            <!--create a name that has the same number of characters as the number of the list in physical_products.paginator.num_pages
            in the view-->
            <!--
            <li class="page-item ">  <a class="page-link" href="?page={{forloop.counter}}">
            {{forloop.counter}}</a></li>
            {% endfor %}
            -->
  
              {% if physical_products.has_next %}
                <li class="page-item"> <a class="page-link" href="?page={{ physical_products.next_page_number }}">Next</a></li>
                <li class="page-item"> <a class="page-link" href="?page={{ physical_products.paginator.num_pages }}">Last &raquo </a></li>
                {% endif %}
                    
              </ul>
            </nav>
            </div>
  
                <!--end of the pagination section-->


        
        <!--end of table-->
            </div>
        </div></div></div>
        <!-- end of first row-->


            
  <!--start of the modal main container-->
<div class="allif-modal-container">
  <!--start of  modal body part-->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog modal-xl"><!--if you remove this div, the modal will work but it will cover the whole page-->
        <div class="modal-content" ><!--if you remove this div, the modal will open but it will not show its header section-->
  
          <form method='POST' action=''>{% csrf_token %}
  
      <!----------------------------------------------start of row----------------------------------------------------->
      <div class="col-md-12"><!--start of the first row body-->
              
          <div class="card-header text-center" >
              <h5>Add stock items</h5>
          </div>
                  
          <div class="row row-mt-12"><!--start of row div --->
                  
              <div class="col-md-4"><!--start of column 1-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Part Number</label>{{form.partNumber}} 
                  <label>Description</label>{{form.description}} 
                  </div>
              </div><!--end of column 1-->
  
              <div class="col-md-4"><!--start of column 2-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Quantity</label> {{form.quantity}} 
                  <label>Unit Price</label> {{form.unitPrice}} 
                  </div>
              </div><!--end of column 2-->
  
              <div class="col-md-4"><!--start of column 3-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Unit Cost</label> {{form.unitcost}} 
                  <label>Reorder Level</label> {{form.reorderLevel}} 
                  </div>
              </div><!--end of column 1-->
  
          </div><!--end of row div --->
  
      </div><!--end of first row body-->
      <!----------------------------------------------end of row----------------------------------------------------->
  
  <!-----------------------------------------------start of row ---------------------------------------------------->
      <div class="col-md-12"><!--start of the second row body-->
        
          <div class="row"><!--start of second row div --->
                  
              <div class="col-md-4"><!--start of column 1-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Vendor</label> {{form.vendor}} 
                  <label>Weight</label>{{form.weight}} 
                  </div>
              </div><!--end of column 1-->
  
              <div class="col-md-4"><!--start of column 2-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Width</label> {{form.width}} 
                  <label>Length</label> {{form.length}}
                  <label>Expiry Date</label> {{form.expiryDate}} 
                  </div>
              </div><!--end of column 2-->
  
              <div class="col-md-4"><!--start of column 3-->
                  <div class="card my-card shadow text-left p-3">
                  <label>Comments</label> {{form.comments}} 
                  <label>Color</label> {{form.color}} 
                  </div>
              </div><!--end of column 1-->
  
          </div><!--end of the second row div --->
  
      </div><!--end of the second row body-->
  
      <!----------------------------------------------end of row---------------------------------------------------->
  
  
  
      <div class="modal-footer">  
      <input type="submit" value='   Save    ' class="btn btn-success">
      <button type="button" class="btn btn-success" data-dismiss="modal">Close</button></div>
        
   </form>
  </div>
  
  </div>
  </div>
  </div><!--end of modal part-->
      
</div><!--end of main container of the page-->

   {% endblock %}